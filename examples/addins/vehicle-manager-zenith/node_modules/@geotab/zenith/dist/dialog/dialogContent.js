"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TRANSLATIONS = exports.DialogContent = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const react_2 = require("react");
const dialogHelpers_1 = require("./dialogHelpers");
const classNames_1 = require("../commonHelpers/classNames/classNames");
const button_1 = require("../button/button");
const focusableSelector_1 = require("../utils/focusableSelector");
const useTrapFocus_1 = require("../commonHelpers/hooks/useTrapFocus");
const useEscape_1 = require("../commonHelpers/hooks/useEscape");
const iconCrossThin_1 = require("../icons/deprecated/iconCrossThin");
const useLanguage_1 = require("../utils/localization/useLanguage");
const useBodyScroll_1 = require("../utils/useBodyScroll");
/**
 * @deprecated - use Modal instead
*/
const DialogContent = ({ onClose, className, title, hasCloseButton, body, footerButtons, footerLeftButtons, maxWidth = "600px", labeledId, isElementVisible }) => {
    const { translate } = (0, useLanguage_1.useLanguage)();
    const contentRef = (0, react_2.useRef)(null);
    const startButtonRef = (0, react_2.useRef)(null);
    const focusableStartInd = (0, react_2.useMemo)(() => (0, dialogHelpers_1.getFocusableStartInd)(footerButtons), [footerButtons]);
    const { setScrollHidden } = (0, useBodyScroll_1.useBodyScroll)();
    const getButtonRef = (ind) => {
        if (focusableStartInd === ind) {
            return startButtonRef;
        }
        return null;
    };
    const getFooterButton = (side, btn, ind) => {
        const buttonArgs = Object.assign(Object.assign({}, btn), { className: (0, classNames_1.classNames)(["zen-dialog-content__footer-item", btn.className || ""]) });
        return (0, react_1.createElement)(button_1.Button, Object.assign({}, buttonArgs, { key: `${side}-${ind}`, ref: side === "right" ? getButtonRef(ind) : null }));
    };
    function subscriptionCondition(trigger) {
        return trigger.current !== null;
    }
    (0, useTrapFocus_1.useTrapFocus)(contentRef, undefined, contentRef, subscriptionCondition, isElementVisible);
    (0, useEscape_1.useEscape)(contentRef, onClose, contentRef, subscriptionCondition);
    (0, react_2.useEffect)(() => {
        if (contentRef.current === null) {
            return;
        }
        if (labeledId) {
            setScrollHidden();
        }
        if (startButtonRef.current) {
            startButtonRef.current.focus();
        }
        else {
            const focusable = contentRef.current.querySelectorAll(focusableSelector_1.FOCUSABLE_SELECTOR);
            focusable.length && focusable[0].focus();
        }
    }, [startButtonRef, labeledId, contentRef, setScrollHidden]);
    return (0, jsx_runtime_1.jsxs)("div", { className: (0, classNames_1.classNames)(["zen-dialog-content", "body-04", className ? className : ""]), style: { maxWidth: maxWidth }, ref: contentRef, children: [(0, jsx_runtime_1.jsxs)("div", { className: "zen-dialog-content__header", children: [(0, jsx_runtime_1.jsx)("div", { className: "zen-dialog-content__header-title heading-04 zen-ellipsis", id: labeledId || "", children: title }), hasCloseButton ? (0, jsx_runtime_1.jsx)("button", { type: "button", className: "zen-dialog-content__header-close-button", title: translate("Close"), "aria-label": translate("Close"), onClick: onClose, children: (0, jsx_runtime_1.jsx)(iconCrossThin_1.IconCrossThin, { className: "svgIcon", size: "big" }) }) : null] }), (0, jsx_runtime_1.jsx)("div", { className: "zen-dialog-content__body body-02-short", children: body }), (0, jsx_runtime_1.jsxs)("div", { className: "zen-dialog-content__footer", children: [(0, jsx_runtime_1.jsx)("div", { className: "zen-dialog-content__footer-left", children: footerLeftButtons && footerLeftButtons.map(getFooterButton.bind(this, "left")) }), (0, jsx_runtime_1.jsx)("div", { className: "zen-dialog-content__footer-right", children: footerButtons.map(getFooterButton.bind(this, "right")) })] })] });
};
exports.DialogContent = DialogContent;
exports.TRANSLATIONS = [
    "Close"
];
