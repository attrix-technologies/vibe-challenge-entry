"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ActionLinkColumnWrapper = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const textIconButton_1 = require("../../../textIconButton/textIconButton");
const actionsButton_1 = require("../actionsColumn/actionsButton");
const generateId_1 = require("../../../commonHelpers/generateId");
class ActionLinkColumnWrapper {
    constructor(options) {
        Object.defineProperty(this, "options", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: options
        });
    }
    render(elt, entity) {
        if (!entity) {
            return null;
        }
        const entityActions = this.options.condition === undefined || this.options.condition(entity);
        const isDisabled = !entityActions;
        const link = isDisabled ? undefined : this.options.createLink(entity);
        const title = this.options.createTitle(entity);
        const icon = this.options.createIcon(entity);
        const getActionWithId = (action) => {
            var _a;
            return (Object.assign(Object.assign({ id: (0, generateId_1.generateId)() }, action), { actions: (_a = action.actions) === null || _a === void 0 ? void 0 : _a.map(a => (Object.assign({ id: (0, generateId_1.generateId)() }, a))) }));
        };
        const entityId = entity["id"] || (0, generateId_1.generateId)();
        const lintUrl = typeof link === "string" ? link : link === null || link === void 0 ? void 0 : link.href;
        return (0, jsx_runtime_1.jsxs)("div", { className: "zen-action-link-column", children: [(0, jsx_runtime_1.jsx)(textIconButton_1.TextIconButton, { disabled: isDisabled, link: lintUrl || "", title: title, "aria-label": title, className: "zen-action-link-column__link", icon: icon, iconSize: "large", type: "primary", iconPosition: textIconButton_1.ButtonIconPosition.Start }), (0, jsx_runtime_1.jsx)("div", { className: "zen-action-link-column__content", children: elt }), this.options.actions
                    ? (0, jsx_runtime_1.jsx)("div", { className: "zen-action-link-column__actions", children: this.options.actions
                            .map(getActionWithId)
                            .map(action => (0, jsx_runtime_1.jsx)(actionsButton_1.ActionsButton, { action: action, entity: entity, isMobile: !!this.options.isMobile }, `${entityId}_${action.id}`)) })
                    : null] });
    }
    renderHeader(title) {
        return (0, jsx_runtime_1.jsx)("div", { className: "zen-action-link-column", children: (0, jsx_runtime_1.jsx)("div", { className: "zen-action-link-column__content", children: title }) });
    }
}
exports.ActionLinkColumnWrapper = ActionLinkColumnWrapper;
