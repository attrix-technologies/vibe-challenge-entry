"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.TRANSLATIONS = exports.DateInputInnerControlBlock = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const textInputRaw_1 = require("../textInputRaw/textInputRaw");
const timePicker_1 = require("../timePicker/timePicker");
const useLanguage_1 = require("../utils/localization/useLanguage");
const classNames_1 = require("../commonHelpers/classNames/classNames");
const formFieldError_1 = require("../formFieldError/formFieldError");
const react_2 = __importDefault(require("react"));
const useDriveClassName_1 = require("../utils/theme/useDriveClassName");
// eslint-disable-next-line @typescript-eslint/naming-convention
exports.DateInputInnerControlBlock = react_2.default.forwardRef(function InnerDateInputControlBlock(props, ref) {
    const { className, title, id, dateText, timePickerValue, placeholder, handleSetDateText, onBlurDateChangeHandler, requireSelection, selectTime, timeChangeHandler, isMobileView, isActiveField, assistiveText } = props;
    const { translate } = (0, useLanguage_1.useLanguage)();
    const driveAssistiveClass = (0, useDriveClassName_1.useDriveClassName)("zen-form-field__text");
    const isHasDateError = requireSelection && !dateText;
    const isHasTimeError = requireSelection && !timePickerValue;
    const memoizedDateInput = (0, react_1.useMemo)(() => (0, jsx_runtime_1.jsx)(textInputRaw_1.TextInputRaw, { className: (0, classNames_1.classNames)(["zen-date-input-inner__text-input", isActiveField ? "zen-date-input-inner__text-input--active" : ""]), id: id, value: dateText, onChange: handleSetDateText, onBlur: onBlurDateChangeHandler, placeholder: placeholder, autocomplete: "off", isError: isHasDateError, ref: ref }), [dateText, handleSetDateText, id, isActiveField, isHasDateError, onBlurDateChangeHandler, placeholder, ref]);
    const memoizedTimeSelect = (0, react_1.useMemo)(() => selectTime
        ? (0, jsx_runtime_1.jsxs)("div", { className: "zen-date-input-inner__inputs-block-item", children: [(0, jsx_runtime_1.jsx)(timePicker_1.TimePicker, { className: (0, classNames_1.classNames)(["zen-date-input-inner__text-input", isActiveField ? "zen-date-input-inner__text-input--active" : "",
                        isHasTimeError ? "zen-date-input-inner__text-input--error" : ""]), value: timePickerValue, onChange: timeChangeHandler, isMobileView: isMobileView, fullWidth: true, dataTimeId: id }), isHasTimeError ? (0, jsx_runtime_1.jsx)(formFieldError_1.FormFieldError, { error: translate("The time must be set") }) : null] })
        : null, [isActiveField, isHasTimeError, isMobileView, selectTime, timeChangeHandler, timePickerValue, translate, id]);
    return (0, jsx_runtime_1.jsxs)("div", { className: (0, classNames_1.classNames)(["zen-date-input-inner__control-block", className || ""]), children: [title
                ? (0, jsx_runtime_1.jsx)("label", { htmlFor: id, className: "zen-date-input-inner__label", children: title })
                : null, (0, jsx_runtime_1.jsxs)("div", { className: "zen-date-input-inner__inputs-block", children: [(0, jsx_runtime_1.jsxs)("div", { className: "zen-date-input-inner__inputs-block-item", children: [memoizedDateInput, isHasDateError ? (0, jsx_runtime_1.jsx)(formFieldError_1.FormFieldError, { error: translate("The date must be set") }) : null] }), memoizedTimeSelect] }), assistiveText ? (0, jsx_runtime_1.jsx)("div", { className: (0, classNames_1.classNames)(["zen-date-input-inner__assistive-text", "zen-form-field__text", driveAssistiveClass || ""]), children: assistiveText }) : null] });
});
exports.TRANSLATIONS = [
    "The date must be set",
    "The time must be set"
];
