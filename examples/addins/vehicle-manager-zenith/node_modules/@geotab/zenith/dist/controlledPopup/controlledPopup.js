"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ControlledPopup = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const absolute_1 = require("../absolute/absolute");
const classNames_1 = require("../commonHelpers/classNames/classNames");
const ControlledPopup = ({ isOpen, id, paddingX, paddingY, triggerRef, className, children, alignment, inline, onOpenChange, useTrapFocusWithTrigger, shouldHoldScroll, ariaLabel, ariaLabelledby, recalculateOnScroll }) => {
    const autoId = (0, react_1.useId)();
    const popupId = id || autoId;
    (0, react_1.useEffect)(() => {
        if (!triggerRef.current) {
            return;
        }
        const triggerRole = triggerRef.current.getAttribute("role");
        triggerRef.current.setAttribute("aria-haspopup", triggerRole === "menuitem" ? "menu" : "true");
        triggerRef.current.setAttribute("aria-expanded", isOpen ? "true" : "false");
        triggerRef.current.setAttribute("aria-controls", popupId);
        triggerRef.current.setAttribute("data-popup-id", popupId);
    }, [triggerRef, isOpen, popupId]);
    return (0, jsx_runtime_1.jsx)(absolute_1.Absolute, { triggerRef: triggerRef, alignment: alignment, id: popupId, isOpen: isOpen, className: (0, classNames_1.classNames)(["zen-popup", className ? className : ""]), paddingX: paddingX, paddingY: paddingY, inline: inline, onOpenChange: onOpenChange, useTrapFocusWithTrigger: useTrapFocusWithTrigger, shouldHoldScroll: shouldHoldScroll, role: "dialog", ariaLabel: ariaLabel, ariaLabelledby: ariaLabelledby, recalculateOnScroll: recalculateOnScroll, children: children });
};
exports.ControlledPopup = ControlledPopup;
