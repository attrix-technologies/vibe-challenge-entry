"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useSettingsStorage = void 0;
const react_1 = require("react");
const flexibleColumnsStorage_1 = require("../../dataGrid/withFlexibleColumns/flexibleColumnsStorage");
const useSettingsStorage = (pageName, storage) => {
    const settingsStorage = (0, react_1.useMemo)(() => storage || new flexibleColumnsStorage_1.ColumnsSettingsStorage(pageName || "", localStorage), [pageName, storage]);
    const saveSettingsToTheStorage = (0, react_1.useCallback)((newSettings) => 
    // not to block main thread this operation can be postponed
    new Promise((resolve, reject) => {
        setTimeout(() => {
            try {
                settingsStorage.setItem(newSettings);
                resolve();
            }
            catch (e) {
                reject(e);
            }
        }, 0);
    }), [settingsStorage]);
    return { settingsStorage, saveSettingsToTheStorage };
};
exports.useSettingsStorage = useSettingsStorage;
