"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getCurrentPageSelection = void 0;
const getCurrentPageSelection = (entities, selectable) => {
    const newSelections = new Set();
    entities.forEach(entity => {
        const isVisible = (selectable === null || selectable === void 0 ? void 0 : selectable.checkboxVisible)
            ? selectable.checkboxVisible(entity)
            : true;
        const isEnabled = !(selectable === null || selectable === void 0 ? void 0 : selectable.checkboxDisabled) || !selectable.checkboxDisabled(entity);
        if ((selectable === null || selectable === void 0 ? void 0 : selectable.strategy) === "nested") {
            (entity.children || []).forEach(child => {
                const isChildVisible = selectable.checkboxVisible
                    ? selectable.checkboxVisible(child, true)
                    : true;
                const isChildEnabled = !selectable.checkboxDisabled || !selectable.checkboxDisabled(child, true);
                if (isChildVisible && isChildEnabled) {
                    newSelections.add(child.id);
                }
            });
        }
        else if (isVisible && isEnabled) {
            newSelections.add(entity.id);
        }
    });
    return newSelections;
};
exports.getCurrentPageSelection = getCurrentPageSelection;
