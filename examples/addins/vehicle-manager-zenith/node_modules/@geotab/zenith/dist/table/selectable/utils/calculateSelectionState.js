"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.calculateSelectionState = void 0;
const interfaces_1 = require("../interfaces");
const calculateSelectionState = (entities, selections, all, checkboxVisible, checkboxDisabled, strategy) => {
    if (selections.size === 0) {
        return all ? interfaces_1.SelectionState.All : interfaces_1.SelectionState.None;
    }
    return entities.every(entity => {
        if (!checkboxVisible(entity)) {
            return true;
        }
        if (checkboxDisabled(entity)) {
            return true;
        }
        if (strategy === "nested") {
            if (entity.children) {
                return entity.children.every(child => {
                    if (!checkboxVisible(child)) {
                        return true;
                    }
                    if (checkboxDisabled(child)) {
                        return true;
                    }
                    return selections.has(child.id);
                });
            }
            return false;
        }
        return selections.has(entity.id);
    }) ? interfaces_1.SelectionState.CurrentPage : interfaces_1.SelectionState.Partial;
};
exports.calculateSelectionState = calculateSelectionState;
