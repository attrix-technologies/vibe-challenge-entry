"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.checkRow = void 0;
const checkRow = (selectionSet, selectable, entities, id, checked) => {
    const setValue = (rowId) => checked ? selectionSet.add(rowId) : selectionSet.delete(rowId);
    if ((selectable === null || selectable === void 0 ? void 0 : selectable.strategy) === "nested") {
        const entity = entities.find(e => e.id === id);
        if (entity && entity.children && entity.children.length > 0) {
            entity.children.forEach(child => {
                const isChildVisible = selectable.checkboxVisible
                    ? selectable.checkboxVisible(child, true)
                    : true;
                const isChildEnabled = !selectable.checkboxDisabled || !selectable.checkboxDisabled(child, true);
                if (isChildVisible && isChildEnabled) {
                    setValue(child.id);
                }
            });
        }
        else {
            setValue(id);
        }
    }
    else {
        setValue(id);
    }
    return selectionSet;
};
exports.checkRow = checkRow;
