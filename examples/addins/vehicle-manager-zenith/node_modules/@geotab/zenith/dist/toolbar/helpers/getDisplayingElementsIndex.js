"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getDisplayingElementsIndex = void 0;
const getCustomizableElement_1 = require("./getCustomizableElement");
const sortDisplayElements_1 = require("./sortDisplayElements");
const handleElementsPriority_1 = require("./handleElementsPriority");
const handleShortnessOfRequiredWidth_1 = require("./handleShortnessOfRequiredWidth");
const getDisplayingElementsIndex = (width, children) => {
    // add customizableMore element
    const parentWithMore = Array.from(children).find(child => Array.from(child.childNodes).some(el => el.classList.contains("zen-toolbar__item--more")));
    const customizableMore = (0, getCustomizableElement_1.getCustomizableElement)(parentWithMore);
    let displayingElements = Object.assign({}, customizableMore);
    const widthProps = {
        width,
        requiredWidth: Object.keys(customizableMore).length ? 80 : 71 // width for more button with margin or without
    };
    displayingElements = (0, handleElementsPriority_1.handleElementsPriority)(children, widthProps, displayingElements);
    displayingElements = (0, handleShortnessOfRequiredWidth_1.handleShortnessOfRequiredWidth)(children, widthProps, displayingElements);
    (0, sortDisplayElements_1.sortDisplayElements)(displayingElements);
    return { displayingElements, customizableMore };
};
exports.getDisplayingElementsIndex = getDisplayingElementsIndex;
