"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getYAxisMeta = void 0;
const getRange_1 = require("./getRange");
const mergeRanges_1 = require("./mergeRanges");
const normalizeRange_1 = require("./normalizeRange");
const getYAxisMeta = (data) => {
    if (data.datasets.length === 0) {
        return [Object.assign({ name: "y" }, (0, getRange_1.getRange)({ data: [] }))];
    }
    const axisMap = data.datasets.reduce((acc, ds) => {
        const name = ds.yAxisID ? ds.yAxisID : "y";
        const range = (0, getRange_1.getRange)({ data: ds.data });
        const prevAxis = acc[name];
        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
        const totalRange = prevAxis ? (0, mergeRanges_1.mergeRanges)(prevAxis, range) : range;
        acc[name] = Object.assign({ name: name }, totalRange);
        return acc;
    }, {});
    return Object.values(axisMap).map(el => (Object.assign(Object.assign({}, el), (0, normalizeRange_1.normalizeRange)(el))));
};
exports.getYAxisMeta = getYAxisMeta;
