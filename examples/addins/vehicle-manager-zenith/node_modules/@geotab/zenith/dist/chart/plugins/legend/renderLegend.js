"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.renderLegend = void 0;
/* eslint-disable @typescript-eslint/indent */
const classNames_1 = require("../../../commonHelpers/classNames/classNames");
const escapeHtml_1 = require("../../../utils/escapeHtml");
const renderLegend = (element, isDrive, items) => {
    const classes = (0, classNames_1.classNames)(["zen-legend", isDrive ? "zen-legend--drive" : ""]);
    const listItems = items.map((item, index) => `<li class="zen-legend__item" data-index="${index}">
            <span class="zen-legend__item-color" style="background-color: ${item.color};"></span>
            <p class="${(0, classNames_1.classNames)(["zen-legend__item-label", item.hidden ? "zen-legend__item-label--hidden" : ""])}">${(0, escapeHtml_1.htmlEscape)(item.text)}</p>
            ${item.value !== undefined
        ? `<p class="${(0, classNames_1.classNames)(["zen-legend__item-value", item.hidden ? "zen-legend__item-value--hidden" : ""])}">${(0, escapeHtml_1.htmlEscape)(item.value)}</p>`
        : ""}
        </li>`).join("");
    element.innerHTML = `<ul class='${classes}'>${listItems}</ul>`;
    const itemElements = element.querySelectorAll(".zen-legend__item");
    itemElements.forEach((item) => {
        item.addEventListener("click", () => {
            const index = item.getAttribute("data-index");
            const legendItem = items[Number(index)];
            if (!legendItem.onClick) {
                return;
            }
            const label = item.querySelector(".zen-legend__item-label");
            label && label.classList.toggle("zen-legend__item-label--hidden");
            const value = item.querySelector(".zen-legend__item-value");
            value && value.classList.toggle("zen-legend__item-value--hidden");
            legendItem.onClick();
        }, false);
    });
};
exports.renderLegend = renderLegend;
