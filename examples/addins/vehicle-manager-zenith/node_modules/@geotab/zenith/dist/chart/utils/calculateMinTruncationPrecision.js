"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.calculateMinTruncationPrecision = void 0;
const countDecimals_1 = require("../../utils/countDecimals");
const truncateDecimals_1 = require("../../utils/truncateDecimals");
const calculateMinTruncationPrecision = (values) => {
    if (values.length === 0) {
        return 0;
    }
    const maxPrecision = 15;
    const uniqueValuesOriginal = new Set(values).size;
    if (uniqueValuesOriginal === 1) {
        const decimals = (0, countDecimals_1.countDecimals)(values[0]);
        return decimals < 3 ? decimals : 3;
    }
    for (let precision = 0; precision <= maxPrecision; precision++) {
        const truncatedValues = values.map(val => (0, truncateDecimals_1.truncateDecimals)(val, precision));
        const uniqueValuesTruncated = new Set(truncatedValues).size;
        if (uniqueValuesTruncated === uniqueValuesOriginal) {
            return precision;
        }
    }
    return maxPrecision;
};
exports.calculateMinTruncationPrecision = calculateMinTruncationPrecision;
