"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getBarTooltipTitle = exports.getBarTooltipItems = void 0;
const formatValue_1 = require("../plugins/legend/formatValue");
const getBarTooltipItems = (data, datasetIndex, index, options, isHidden) => {
    if (data.datasets.length === 0) {
        return [];
    }
    if (datasetIndex === undefined || index === undefined) {
        return [];
    }
    return data.datasets.map((dataset, dsIndex) => {
        if (dataset.data.length === 0) {
            return undefined;
        }
        if (isHidden(dsIndex)) {
            return undefined;
        }
        const dataItem = dataset.data[index];
        const itemValue = typeof dataItem === "number" ? dataItem : dataItem.y;
        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
        const value = itemValue !== undefined ? (0, formatValue_1.formatValue)(itemValue.toFixed(2), dsIndex, options === null || options === void 0 ? void 0 : options.unit) : undefined;
        const label = dataset.label || "";
        const color = Array.isArray(dataset.backgroundColor) && dataset.backgroundColor[index] ? dataset.backgroundColor[index] :
            typeof dataset.borderColor === "string" ? dataset.borderColor : "";
        return { label, value, color };
    }).filter(item => item !== undefined);
};
exports.getBarTooltipItems = getBarTooltipItems;
const getBarTooltipTitle = (data, datasetIndex, index) => {
    if (data.datasets.length === 0) {
        return undefined;
    }
    if (datasetIndex === undefined || index === undefined) {
        return undefined;
    }
    const dataset = data.datasets[datasetIndex];
    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
    if (dataset && dataset.data[index]) {
        const dataItem = dataset.data[index];
        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
        if (typeof dataItem === "object" && dataItem !== null && "x" in dataItem) {
            return dataItem.x;
        }
    }
    return undefined;
};
exports.getBarTooltipTitle = getBarTooltipTitle;
