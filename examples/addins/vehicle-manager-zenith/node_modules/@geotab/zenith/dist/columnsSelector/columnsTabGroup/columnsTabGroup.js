"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TRANSLATIONS = exports.ColumnsTabGroup = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const accordion_1 = require("../../accordion/accordion");
const columnsTab_1 = require("../columnsTab/columnsTab");
const useLanguage_1 = require("../../utils/localization/useLanguage");
const ColumnsTabGroup = ({ columns, onColumnToggle }) => {
    const { translate } = (0, useLanguage_1.useLanguage)();
    const [activeTabs, setActiveTabs] = (0, react_1.useState)([]);
    if (columns.length === 0) {
        return (0, jsx_runtime_1.jsx)(jsx_runtime_1.Fragment, {});
    }
    const accordionData = columns.map(function (column, i) {
        const handleColumnToggle = (state) => {
            const updatedColumnsGroup = columns.map(function (col, j) {
                if (i === j) {
                    return Object.assign(Object.assign({}, col), { children: state });
                }
                return col;
            });
            onColumnToggle(updatedColumnsGroup);
        };
        return {
            id: column.id,
            title: column.name,
            content: (0, jsx_runtime_1.jsx)(columnsTab_1.ColumnsTab, { id: column.id, columns: column.children, onColumnToggle: handleColumnToggle })
        };
    });
    const clickHandler = (itemId) => setActiveTabs((oldActiveIds) => {
        const isClosed = oldActiveIds.indexOf(itemId) === -1;
        return isClosed
            ? oldActiveIds.concat(itemId)
            : oldActiveIds.filter(item => item !== itemId);
    });
    const accordion = (0, jsx_runtime_1.jsx)(accordion_1.Accordion, { className: "zen-accordion--legacy", data: accordionData, activeIds: activeTabs, onItemClick: clickHandler });
    return (0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)("header", { className: "zen-columns-filter__item zen-columns-filter__item--header", children: translate("Additional Properties") }), accordion] });
};
exports.ColumnsTabGroup = ColumnsTabGroup;
exports.TRANSLATIONS = [
    "Additional Properties"
];
