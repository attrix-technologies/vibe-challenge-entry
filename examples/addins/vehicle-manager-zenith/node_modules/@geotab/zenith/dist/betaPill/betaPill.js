"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TRANSLATIONS = exports.BetaPill = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const classNames_1 = require("../commonHelpers/classNames/classNames");
const useMobile_1 = require("../commonHelpers/hooks/useMobile");
const iconLab_1 = require("../icons/iconLab");
const pill_1 = require("../pill/pill");
const useLanguage_1 = require("../utils/localization/useLanguage");
const pillExpandable_1 = require("../pillExpandable/pillExpandable");
const betaPillContext_1 = require("./betaPillContext");
const BetaPill = ({ className, feedbackAction, betaOptionAction }) => {
    const { translate } = (0, useLanguage_1.useLanguage)();
    const isMobile = (0, useMobile_1.useMobile)();
    const pillClasses = (0, react_1.useMemo)(() => (0, classNames_1.classNames)([
        "zen-caption",
        "zen-beta-pill",
        isMobile ? "zen-beta-pill--mobile" : "",
        className !== null && className !== void 0 ? className : ""
    ]), [isMobile, className]);
    const contextActions = (0, betaPillContext_1.useBetaPillActions)();
    let resolvedMainAction = feedbackAction || (contextActions === null || contextActions === void 0 ? void 0 : contextActions.feedbackAction);
    let resolvedSecondaryAction = betaOptionAction || (contextActions === null || contextActions === void 0 ? void 0 : contextActions.betaOptionAction);
    if (resolvedMainAction || resolvedSecondaryAction) {
        resolvedMainAction = Object.assign(Object.assign({}, resolvedMainAction), { text: (resolvedMainAction === null || resolvedMainAction === void 0 ? void 0 : resolvedMainAction.text) || translate("Send feedback") });
        resolvedSecondaryAction = Object.assign(Object.assign({}, resolvedSecondaryAction), { text: (resolvedSecondaryAction === null || resolvedSecondaryAction === void 0 ? void 0 : resolvedSecondaryAction.text) || translate("Manage beta option") });
        return ((0, jsx_runtime_1.jsx)(pillExpandable_1.PillExpandable, { isBeta: true, icon: iconLab_1.IconLab, description: translate("This feature is still in testing, and is not fully supported yet. Your feedback is valuable to help guide future enhancements."), text: translate("Beta"), type: "info", className: pillClasses, mainAction: resolvedMainAction, secondaryAction: resolvedSecondaryAction }));
    }
    return ((0, jsx_runtime_1.jsx)(pill_1.Pill, { icon: iconLab_1.IconLab, className: pillClasses, type: "info", children: !isMobile && ((0, jsx_runtime_1.jsx)("span", { className: "zen-caption__content", children: translate("Beta") })) }));
};
exports.BetaPill = BetaPill;
exports.TRANSLATIONS = ["Beta"];
