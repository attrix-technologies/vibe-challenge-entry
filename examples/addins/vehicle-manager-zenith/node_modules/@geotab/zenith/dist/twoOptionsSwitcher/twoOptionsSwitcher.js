"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TwoOptionsSwitcher = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const classNames_1 = require("../commonHelpers/classNames/classNames");
const TwoOptionsSwitcher = ({ className, leftOption, rightOption, value, disabled, onChange }) => {
    const leftId = (0, react_1.useId)();
    const rightId = (0, react_1.useId)();
    const leftOptionRef = (0, react_1.useRef)(null);
    const rightOptionRef = (0, react_1.useRef)(null);
    const prevValue = (0, react_1.useRef)(value);
    const handleChange = () => {
        onChange(value === leftOption.value ? rightOption.value : leftOption.value);
    };
    const handleRunnerClick = () => {
        if (disabled) {
            return;
        }
        onChange(value === leftOption.value ? rightOption.value : leftOption.value);
    };
    const handleKeyDown = (e) => {
        const isSpace = e.code === "Space";
        if (isSpace && !disabled) {
            e.preventDefault();
            const newValue = value === leftOption.value ? rightOption.value : leftOption.value;
            onChange(newValue);
        }
    };
    (0, react_1.useEffect)(() => {
        var _a, _b;
        if (value !== prevValue.current) {
            value === leftOption.value && ((_a = leftOptionRef.current) === null || _a === void 0 ? void 0 : _a.focus());
            value === rightOption.value && ((_b = rightOptionRef.current) === null || _b === void 0 ? void 0 : _b.focus());
            prevValue.current = value;
        }
    }, [prevValue, value, leftOption.value, rightOption.value]);
    return (0, jsx_runtime_1.jsxs)("div", { className: (0, classNames_1.classNames)(["zen-two-options-switcher", className || ""]), onKeyDown: handleKeyDown, children: [(0, jsx_runtime_1.jsx)("input", { className: "zen-two-options-switcher__input zen-two-options-switcher__input-left", type: "radio", name: `twoOptionsSwitcher_${leftOption.value}_or_${rightOption.value}`, id: leftId, value: leftOption.value, checked: value === leftOption.value, disabled: disabled, onChange: handleChange, ref: leftOptionRef }), (0, jsx_runtime_1.jsx)("label", { className: "zen-two-options-switcher__label zen-two-options-switcher__label--left", htmlFor: leftId, children: leftOption.label }), (0, jsx_runtime_1.jsxs)("div", { className: (0, classNames_1.classNames)(["zen-two-options-switcher__control zen-two-options-switcher-control", disabled ? "zen-two-options-switcher-control--disabled" : "",
                    value === rightOption.value ? "zen-two-options-switcher-control--right" : ""]), onClick: handleRunnerClick, children: [(0, jsx_runtime_1.jsx)("div", { className: "zen-two-options-switcher-control__focus" }), (0, jsx_runtime_1.jsx)("div", { className: "zen-two-options-switcher-control__runner" })] }), (0, jsx_runtime_1.jsx)("input", { className: "zen-two-options-switcher__input zen-two-options-switcher__input-right", type: "radio", name: `twoOptionsSwitcher_${leftOption.value}_or_${rightOption.value}`, id: rightId, value: rightOption.value, checked: value === rightOption.value, disabled: disabled, onChange: handleChange, ref: rightOptionRef }), (0, jsx_runtime_1.jsx)("label", { className: "zen-two-options-switcher__label zen-two-options-switcher__label--right", htmlFor: rightId, children: rightOption.label })] });
};
exports.TwoOptionsSwitcher = TwoOptionsSwitcher;
