"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.TRANSLATIONS = exports.DropdownList = exports.EmptyList = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importStar(require("react"));
const checkboxListWithAction_1 = require("../checkboxListWithAction/checkboxListWithAction");
const classNames_1 = require("../commonHelpers/classNames/classNames");
const iconBackArrow_1 = require("../icons/deprecated/iconBackArrow");
const iconCheckRadio_1 = require("../icons/iconCheckRadio");
const button_1 = require("../button/button");
const buttonType_1 = require("../button/buttonType");
const selectList_1 = require("../selectList/selectList");
const checkboxState_1 = require("../checkbox/checkboxState");
const useDrive_1 = require("../utils/theme/useDrive");
const useDriveClassName_1 = require("../utils/theme/useDriveClassName");
const useLanguage_1 = require("../utils/localization/useLanguage");
const checkbox_1 = require("../checkbox/checkbox");
const EmptyList = ({ className, width, onClearClick, onApplyClick, onCancelClick, hasApplyButton, isApplyDisabled, isClearButtonDisabled, isWithFooter, hasError }) => {
    const { translate } = (0, useLanguage_1.useLanguage)();
    const styleWidth = width ? { style: { width: `${width}px` } } : {};
    return (0, jsx_runtime_1.jsxs)("div", Object.assign({}, styleWidth, { className: (0, classNames_1.classNames)(["zen-dropdown-list__container", className || ""]), children: [(0, jsx_runtime_1.jsx)("div", { className: "zen-dropdown-list__container--empty", children: translate(hasError ? "Error Loading Items" : "No data") }), isWithFooter ? (0, jsx_runtime_1.jsxs)("div", { className: "zen-dropdown-list__footer", children: [(0, jsx_runtime_1.jsx)(button_1.Button, { onClick: onClearClick, disabled: isClearButtonDisabled, className: "zen-dropdown-list__clear-button", type: buttonType_1.ButtonType.Tertiary, title: translate("Clear"), children: translate("Clear") }), hasApplyButton && (0, jsx_runtime_1.jsxs)("div", { className: "zen-dropdown-list__button-group", children: [(0, jsx_runtime_1.jsx)(button_1.Button, { onClick: onCancelClick, className: "zen-dropdown-list__cancel-button", title: translate("Cancel"), children: translate("Cancel") }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: onApplyClick, type: buttonType_1.ButtonType.Primary, disabled: isApplyDisabled, className: "zen-dropdown-list__apply-button", title: translate("Apply"), children: translate("Apply") })] })] }) : null] }));
};
exports.EmptyList = EmptyList;
const DropdownList = ({ onBackButtonClick, onSelectAllClick, onClearClick, onApplyClick, onCancelClick, onChange, onSelect, onSingleSelect, listData, isAllSelected, backButtonName, width, minWidth, isSelectAllButtonDisable, hasSelectAllButton, filterName, isMultiselect, hasApplyButton, isApplyDisabled, isClearButtonDisabled, activeValue, forceSelection, isWithFooter, isMobile, handleCheckboxChange, checkboxLabel, isChecked }) => {
    const { translate } = (0, useLanguage_1.useLanguage)();
    const isDrive = (0, useDrive_1.useDrive)();
    const driveComponentClass = (0, useDriveClassName_1.useDriveClassName)("zen-dropdown-list");
    const listId = (0, react_1.useId)();
    const handleSelectAllClick = () => {
        onSelectAllClick(isAllSelected);
    };
    const handleChange = (0, react_1.useCallback)((value) => {
        onChange(value);
    }, [onChange]);
    const handleClick = (0, react_1.useCallback)((id) => {
        onSelect(id);
    }, [onSelect]);
    const handleClearClick = (0, react_1.useCallback)(() => {
        onSingleSelect(true);
    }, [onSingleSelect]);
    const handleSingleChange = (0, react_1.useCallback)((newState) => {
        let newActiveEl = undefined;
        newState.forEach((value, key) => {
            if (value === checkboxState_1.CheckboxState.On) {
                newActiveEl = key;
            }
        });
        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
        forceSelection ? onSingleSelect(false, newActiveEl || activeValue) : onSingleSelect(false, newActiveEl);
    }, [activeValue, forceSelection, onSingleSelect]);
    const selectButtonLabel = isAllSelected ? translate("Deselect all") : translate("Select all");
    const getActionButton = (label, title, icon, isDisable, clickHandler, size) => (0, jsx_runtime_1.jsx)("button", { type: "button", disabled: isDisable, onClick: clickHandler, className: "zen-dropdown-list__item zen-dropdown-list__item--interactive zen-dropdown-list__action-button zen-dropdown-list__action-button-back", title: title, children: (0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [react_1.default.createElement(icon, { className: "zen-dropdown-list__icon zen-dropdown-list__action-icon", size: size }), (0, jsx_runtime_1.jsx)("div", { className: (0, classNames_1.classNames)(["zen-dropdown-list__action-label", "zen-dropdown-list__action-label--limited", "zen-ellipsis"]), children: label })] }) });
    const styleWidth = (0, react_1.useMemo)(() => {
        if (width && !isMobile) {
            return { style: Object.assign({ width: `${width}px` }, (minWidth ? { minWidth: `${minWidth}px` } : {})) };
        }
        return minWidth ? { style: { minWidth: `${minWidth}px` } } : {};
    }, [width, isMobile, minWidth]);
    const listDataComponent = (0, react_1.useMemo)(() => {
        const createValue = (data, activeId) => {
            const values = new Map();
            data === null || data === void 0 ? void 0 : data.forEach(el => {
                values.set(el.id, activeId === el.id ? checkboxState_1.CheckboxState.On : checkboxState_1.CheckboxState.Off);
            });
            return values;
        };
        return (0, jsx_runtime_1.jsx)("div", { className: "zen-dropdown-list__elements", children: isMultiselect ? (0, jsx_runtime_1.jsx)(checkboxListWithAction_1.CheckboxListWithAction, { options: listData, label: "", onChange: handleChange, onClick: handleClick }) : (0, jsx_runtime_1.jsx)(selectList_1.SelectList, { onChange: handleSingleChange, onClick: handleClick, title: translate("Select option"), id: listId, multiselect: false, selectItemOnFocus: false, items: listData, forceSelection: forceSelection, value: createValue(listData, activeValue) }) });
    }, [isMultiselect, listData, handleChange, handleClick, handleSingleChange, translate, listId, forceSelection, activeValue]);
    return (0, jsx_runtime_1.jsxs)("div", Object.assign({ className: (0, classNames_1.classNames)(["zen-dropdown-list", driveComponentClass || ""]) }, styleWidth, { children: [filterName ? (0, jsx_runtime_1.jsx)("div", { className: "zen-dropdown-list__label", children: filterName }) : null, handleCheckboxChange ? (0, jsx_runtime_1.jsx)("div", { className: "zen-dropdown-list__checkbox-container", children: (0, jsx_runtime_1.jsx)(checkbox_1.Checkbox, { checked: isChecked, onChange: handleCheckboxChange, children: checkboxLabel }) }) : null, backButtonName ? (0, jsx_runtime_1.jsx)("div", { className: "zen-dropdown-list__item-wrapper", children: getActionButton(backButtonName, translate("Back"), iconBackArrow_1.IconBackArrow, false, onBackButtonClick, "large") }) : null, hasSelectAllButton ? getActionButton(selectButtonLabel, selectButtonLabel, iconCheckRadio_1.IconCheckRadio, isSelectAllButtonDisable, handleSelectAllClick, isDrive ? "huger" : "huge") : null, listDataComponent, isWithFooter ? (0, jsx_runtime_1.jsxs)("div", { className: "zen-dropdown-list__footer", children: [(0, jsx_runtime_1.jsx)(button_1.Button, { onClick: isMultiselect ? onClearClick : handleClearClick, disabled: isClearButtonDisabled, className: "zen-dropdown-list__clear-button zen-ellipsis", type: buttonType_1.ButtonType.Tertiary, title: translate("Clear"), children: translate("Clear") }), hasApplyButton && (0, jsx_runtime_1.jsxs)("div", { className: "zen-dropdown-list__button-group", children: [(0, jsx_runtime_1.jsx)(button_1.Button, { onClick: onCancelClick, className: "zen-dropdown-list__cancel-button zen-ellipsis", title: translate("Cancel"), children: translate("Cancel") }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: onApplyClick, type: buttonType_1.ButtonType.Primary, disabled: isApplyDisabled, className: "zen-dropdown-list__apply-button zen-ellipsis", title: translate("Apply"), children: translate("Apply") })] })] }) : null] }));
};
exports.DropdownList = DropdownList;
exports.TRANSLATIONS = [
    "Select all",
    "Deselect all",
    "Clear",
    "Back",
    "No data"
];
