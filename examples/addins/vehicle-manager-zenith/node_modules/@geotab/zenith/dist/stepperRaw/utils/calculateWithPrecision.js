"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.calculateWithPrecision = void 0;
const countDecimals_1 = require("../../utils/countDecimals");
const calculateWithPrecision = (value, step, isAddition = true) => {
    // Get the number of decimal places for both numbers
    const decimals1 = (0, countDecimals_1.countDecimals)(value);
    const decimals2 = (0, countDecimals_1.countDecimals)(step);
    // Find the maximum number of decimal places
    const maxDecimals = Math.max(decimals1, decimals2);
    // Calculate the scale factor (e.g., 100 for 2 decimals, 1000 for 3)
    const scaleFactor = Math.pow(10, maxDecimals);
    // Convert to integers, perform the addition, and scale back
    const integerValue = Math.round(value * scaleFactor);
    const integerStep = Math.round(step * scaleFactor);
    const result = isAddition
        ? (integerValue + integerStep) / scaleFactor
        : (integerValue - integerStep) / scaleFactor;
    return result;
};
exports.calculateWithPrecision = calculateWithPrecision;
