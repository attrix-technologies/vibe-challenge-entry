"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ItemDataInternal = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const interfaces_1 = require("../interfaces");
const useLanguage_1 = require("../../utils/localization/useLanguage");
const button_1 = require("../../button/button");
const classNames_1 = require("../../commonHelpers/classNames/classNames");
const iconChevronRight_1 = require("../../icons/iconChevronRight");
const iconDotVertical_1 = require("../../icons/iconDotVertical");
const menu_1 = require("../../menu/menu");
const isActiveElement_1 = require("../utils/isActiveElement");
const checkbox_1 = require("../../checkbox/checkbox");
const ItemDataInternalInner = ({ id, visible, icon, iconClassName, name, link, secondary, status, actions, data, onClick, checked, onCheck, isDrive, isMobile, target }) => {
    const { translate } = (0, useLanguage_1.useLanguage)();
    const driveClassName = (0, react_1.useMemo)(() => isDrive
        ? isMobile ? "zen-item-data-drive" : "zen-item-data-drive-tablet"
        : "", [isDrive, isMobile]);
    const renderActions = (0, react_1.useCallback)(() => {
        if (!actions || actions.length === 0) {
            return null;
        }
        return (0, jsx_runtime_1.jsx)(menu_1.Menu, { alignment: "bottom-right", title: translate("More"), trigger: (0, jsx_runtime_1.jsx)(button_1.Button, { type: "tertiary-black", className: "zen-item-data__more-button", "aria-label": translate("More"), title: translate("More"), children: (0, jsx_runtime_1.jsx)(iconDotVertical_1.IconDotVertical, { size: "large" }) }), children: actions.map((action) => (0, jsx_runtime_1.jsx)(menu_1.Menu.Item, { id: action.name, name: action.name, onClick: (0, interfaces_1.isButtonAction)(action) ? action.onClick : undefined, link: !(0, interfaces_1.isButtonAction)(action) ? action.link : undefined }, action.name)) });
    }, [actions, translate]);
    const renderIcon = (0, react_1.useCallback)((iconComponent, iClassName, className) => {
        if (typeof iconComponent === "function") {
            return (0, react_1.createElement)(iconComponent, { size: "large", className: (0, classNames_1.classNames)([className || "", iClassName || ""]) });
        }
        return iconComponent;
    }, []);
    const handleClick = (0, react_1.useCallback)((e) => {
        if (!onClick) {
            return;
        }
        if (e.target instanceof HTMLElement && (0, isActiveElement_1.isActiveElement)(e.target)) {
            return;
        }
        onClick();
    }, [onClick]);
    const handleCheck = (0, react_1.useCallback)((e) => {
        if (onCheck) {
            onCheck(e.target.checked);
        }
    }, [onCheck]);
    const hasCheckbox = (0, react_1.useMemo)(() => checked !== undefined && onCheck, [checked, onCheck]);
    const placeholderHeight = (0, react_1.useMemo)(() => {
        let plHeight = secondary ? 32 : (icon ? 24 : 16);
        if (data) {
            plHeight += 4 + data.length * 16 + (data.length - 1) * 4;
        }
        return { height: `${plHeight + 12 * 2 + 1}px` };
    }, [data, icon, secondary]);
    const classNamesList = (0, react_1.useMemo)(() => (0, classNames_1.classNames)(["zen-item-data", driveClassName || ""]), [driveClassName]);
    if (!visible) {
        return (0, jsx_runtime_1.jsx)("li", { style: placeholderHeight, className: classNamesList, "data-list-item-id": id }, id);
    }
    return (0, jsx_runtime_1.jsxs)("li", { className: (0, classNames_1.classNames)(["zen-item-data", driveClassName || ""]), "data-list-item-id": id, onClick: handleClick, children: [(0, jsx_runtime_1.jsxs)("div", { className: "zen-item-data__main", children: [hasCheckbox && (0, jsx_runtime_1.jsx)(checkbox_1.Checkbox, { className: "zen-item-data__checkbox", checked: checked, onChange: handleCheck, title: name }), icon ? (0, jsx_runtime_1.jsx)("div", { className: (0, classNames_1.classNames)(["zen-item-data__icon", iconClassName || ""]), children: renderIcon(icon) }) : null, (0, jsx_runtime_1.jsxs)("div", { className: "zen-item-data__main-data", children: [(0, jsx_runtime_1.jsxs)("div", { className: "zen-item-data__identifier", children: [link
                                        ? (0, jsx_runtime_1.jsx)("a", { href: link, target: target, className: "zen-item-data__link zen-link zen-link--light zen-link--inline", children: name })
                                        : (0, jsx_runtime_1.jsx)("div", { className: "zen-item-data__name", children: name }), secondary ? (0, jsx_runtime_1.jsx)("div", { className: "zen-item-data__secondary", children: secondary }) : null] }), status ? (0, jsx_runtime_1.jsx)("div", { className: "zen-item-data__status", children: status }) : null, renderActions(), onClick ? (0, jsx_runtime_1.jsx)(button_1.Button, { type: "tertiary-black", className: "zen-item-data__click", onClick: onClick, title: translate("Open"), "aria-label": translate("Open"), children: (0, jsx_runtime_1.jsx)(iconChevronRight_1.IconChevronRight, { size: "large", className: "zen-item-data__click-icon" }) }) : null] })] }), data && data.length > 0
                ? (0, jsx_runtime_1.jsxs)("div", { className: "zen-item-data__secondary-data", children: [hasCheckbox ? (0, jsx_runtime_1.jsx)("div", { className: "zen-item-data__checkbox-placeholder" }) : null, icon ? (0, jsx_runtime_1.jsx)("div", { className: "zen-item-data__icon-placeholder" }) : null, (0, jsx_runtime_1.jsx)("div", { className: "zen-item-data__data", children: data.map((item, index) => ((0, jsx_runtime_1.jsxs)("div", { className: "zen-item-data__data-row", children: [item.label ? (0, jsx_runtime_1.jsx)("span", { className: "zen-item-data__data-label", children: item.label }) : null, (0, jsx_runtime_1.jsxs)("span", { className: "zen-item-data__data-value", children: [item.icon ? renderIcon(item.icon, item.iconClassName, "zen-item-data__data-value-icon") : null, item.link
                                                ? (0, jsx_runtime_1.jsx)("a", { className: "zen-link zen-link--inline zen-link--light", href: item.link, target: target, children: item.value })
                                                : (0, jsx_runtime_1.jsx)("span", { className: "zen-item-data__data-value-text", children: item.value })] })] }, index))) })] })
                : null] }, id);
};
exports.ItemDataInternal = (0, react_1.memo)(ItemDataInternalInner);
