"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useContainerScroll = void 0;
const react_1 = require("react");
const useContainerScroll = () => {
    const scrollTimeoutRef = (0, react_1.useRef)(null);
    const moveScrollFunc = (container, dndElement) => {
        const containerRect = container.getBoundingClientRect();
        const elementRect = dndElement.getBoundingClientRect();
        // pixels from the edge to start scrolling
        const scrollThreshold = 50;
        if (elementRect.top < containerRect.top + scrollThreshold) {
            container.scrollTop -= 10;
        }
        else if (elementRect.bottom > containerRect.bottom - scrollThreshold) {
            container.scrollTop += 10;
        }
    };
    const moveScroll = (0, react_1.useCallback)((container, dndElement, callback) => {
        if (scrollTimeoutRef.current) {
            return;
        }
        moveScrollFunc(container, dndElement);
        callback();
        scrollTimeoutRef.current = setTimeout(() => {
            scrollTimeoutRef.current = null;
            moveScroll(container, dndElement, callback);
        }, 50);
    }, [scrollTimeoutRef]);
    const cancelMoveScroll = (0, react_1.useCallback)(() => {
        if (scrollTimeoutRef.current) {
            clearTimeout(scrollTimeoutRef.current);
            scrollTimeoutRef.current = null;
        }
    }, [scrollTimeoutRef]);
    return { moveScroll, cancelMoveScroll };
};
exports.useContainerScroll = useContainerScroll;
