"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ReportPopupContent = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const reportsItem_1 = require("./reportsItem");
const reportPopup_1 = require("./reportPopup");
const classNames_1 = require("../commonHelpers/classNames/classNames");
const buttonType_1 = require("../button/buttonType");
const reports_1 = require("./reports");
const groupedReportsItem_1 = require("./groupedReportsItem");
const button_1 = require("../button/button");
exports.ReportPopupContent = 
// eslint-disable-next-line @typescript-eslint/naming-convention
(0, react_1.forwardRef)(function ReportsContent({ isGrouped = false, reports, onPreparePDFClick, onReportClick, onViewInBrowserClick }, ref) {
    const renderReportItem = (0, react_1.useCallback)((report) => (0, jsx_runtime_1.jsx)(reportsItem_1.ReportsItem, { isActive: report.isActive, id: report.id, onReportClick: () => { onReportClick(report.id); }, onPreparePDFClick: () => { onPreparePDFClick(report.id); }, onViewInBrowserClick: () => { onViewInBrowserClick(report.id); }, label: report.label }, report.id), [onReportClick, onPreparePDFClick, onViewInBrowserClick]);
    const renderWebButton = (0, react_1.useCallback)((item) => (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: () => { onReportClick(item.id); }, className: (0, classNames_1.classNames)(["zen-report-popup-content__header-button", item.isActive ? "zen-report-popup-content__header-button--active" : ""]), type: buttonType_1.ButtonType.Secondary, children: item.label }, item.id), [onReportClick]);
    const renderGroupedReports = (0, react_1.useCallback)((data) => data.map((item) => {
        var _a;
        return item.id === reportPopup_1.WEB_ITEM_ID ?
            renderWebButton(item) :
            (0, jsx_runtime_1.jsx)(groupedReportsItem_1.GroupedReportsItem, { label: item.label, children: (0, jsx_runtime_1.jsx)(reports_1.Reports, { children: (_a = item.templates) === null || _a === void 0 ? void 0 : _a.map((report) => renderReportItem(report)) }) }, item.id);
    }), [renderReportItem, renderWebButton]);
    const renderReports = (0, react_1.useCallback)((data) => {
        var _a;
        return (0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [((_a = data[0]) === null || _a === void 0 ? void 0 : _a.id) === reportPopup_1.WEB_ITEM_ID ? renderWebButton(data[0]) : "", (0, jsx_runtime_1.jsx)(reports_1.Reports, { children: data.filter(report => report.id !== reportPopup_1.WEB_ITEM_ID).map((report) => renderReportItem(report)) })] });
    }, [renderReportItem, renderWebButton]);
    return (0, jsx_runtime_1.jsx)("div", { className: "zen-report-popup-content", ref: ref, children: isGrouped ? renderGroupedReports(reports) : renderReports(reports) });
});
