"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TRANSLATIONS = exports.PillBox = exports.DEFAULT_MAX_PILLS = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const classNames_1 = require("../commonHelpers/classNames/classNames");
const getValidMaxPills_1 = require("./utils/getValidMaxPills");
const useLanguage_1 = require("../utils/localization/useLanguage");
const pillBoxItem_1 = require("./components/pillBoxItem");
const pill_1 = require("../pill/pill");
const pillBoxItem_2 = require("./components/pillBoxItem");
const useDriveClassName_1 = require("../utils/theme/useDriveClassName");
exports.DEFAULT_MAX_PILLS = 5;
const PillBox = ({ className = "", hideSelectedLabel, selectedPills, isAllSelected, onRemove, maxPills = exports.DEFAULT_MAX_PILLS }) => {
    const onRemoveEmpty = (0, react_1.useCallback)(() => { }, []);
    const driveComponentClass = (0, useDriveClassName_1.useDriveClassName)("zen-pill-box");
    const onRemoveMemoized = (0, react_1.useCallback)((value) => onRemove === null || onRemove === void 0 ? void 0 : onRemove(value), [onRemove]);
    const { translate } = (0, useLanguage_1.useLanguage)();
    if (!selectedPills.length && !isAllSelected) {
        return null;
    }
    const validMaxPills = (0, getValidMaxPills_1.getValidMaxPills)(maxPills);
    const visiblePills = validMaxPills ? selectedPills.slice(0, validMaxPills) : selectedPills;
    const hiddenPillsIds = validMaxPills ? selectedPills.slice(validMaxPills).map(item => item.id) : [];
    const morePill = (0, jsx_runtime_1.jsx)(pill_1.Pill, { className: (0, classNames_1.classNames)(["zen-pill-box__pill", "zen-caption", "zen-pill-box__more-pill"]), children: (0, jsx_runtime_1.jsx)("span", { className: "zen-caption__content", children: translate("and {0} more").replace("{0}", hiddenPillsIds.length.toString()) }) }, "idClosePill");
    return (0, jsx_runtime_1.jsxs)("div", { className: (0, classNames_1.classNames)(["zen-pill-box", driveComponentClass !== null && driveComponentClass !== void 0 ? driveComponentClass : "", className]), children: [hideSelectedLabel ? null : (0, jsx_runtime_1.jsx)("div", { className: "zen-pill-box__label", children: `${translate("Selected:")}${isAllSelected ? " " + translate("All") : ""}` }), !isAllSelected && visiblePills.length ? (0, jsx_runtime_1.jsxs)("div", { className: "zen-pill-box__pills", children: [visiblePills.map(item => (0, jsx_runtime_1.jsx)(pillBoxItem_1.PillBoxItem, { item: item, onRemove: onRemove ? onRemoveMemoized : onRemoveEmpty, className: "zen-pill-box__pill" }, item.id)), hiddenPillsIds.length ? morePill : null] }) : null] });
};
exports.PillBox = PillBox;
exports.TRANSLATIONS = [
    "Selected:",
    "All",
    "and {0} more",
    ...pillBoxItem_2.TRANSLATIONS
];
