"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.selectReducer = void 0;
const select_actionTypes_1 = require("./select.actionTypes");
const selectList_reducer_1 = require("../selectList/selectList.reducer");
const selectList_actionTypes_1 = require("../selectList/selectList.actionTypes");
const selectReducer = (state, action) => {
    const { type, payload } = action;
    switch (type) {
        case select_actionTypes_1.SelectAction.Expand: {
            const newState = (0, selectList_reducer_1.selectListReducer)(state, { type: selectList_actionTypes_1.ListAction.Focus, payload: { items: payload.items, multiselect: false } });
            return Object.assign(Object.assign(Object.assign({}, state), newState), { expanded: true });
        }
        case select_actionTypes_1.SelectAction.Collapse: {
            return Object.assign(Object.assign({}, state), { activeIndex: -1, expanded: false });
        }
        case select_actionTypes_1.SelectAction.CollapseAndSelect: {
            const newState = (0, selectList_reducer_1.selectListReducer)(state, { type: selectList_actionTypes_1.ListAction.Blur, payload: { multiselect: false } });
            return Object.assign(Object.assign(Object.assign({}, state), newState), { expanded: false });
        }
        case select_actionTypes_1.SelectAction.FocusFirstAndExpand: {
            const listState = (0, selectList_reducer_1.selectListReducer)(state, { type: selectList_actionTypes_1.ListAction.FocusFirst, payload: { items: payload.items } });
            return Object.assign(Object.assign(Object.assign({}, state), listState), { expanded: true });
        }
        case select_actionTypes_1.SelectAction.SearchAndExpand: {
            const listState = (0, selectList_reducer_1.selectListReducer)(state, { type: selectList_actionTypes_1.ListAction.SearchItem, payload: { items: payload.items, key: payload.key } });
            return Object.assign(Object.assign(Object.assign({}, state), listState), { expanded: true });
        }
        default: {
            const newSelectListState = (0, selectList_reducer_1.selectListReducer)(state, action);
            const expanded = newSelectListState.isItemsStateChanged ? false : state.expanded;
            return Object.assign(Object.assign(Object.assign({}, state), newSelectListState), { expanded });
        }
    }
};
exports.selectReducer = selectReducer;
