"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getNumberOfChangedFilters = void 0;
const isArraysEqualDeeply_1 = require("../../utils/compareElementsUtils/isArraysEqualDeeply");
const isElementsEqual_1 = require("../../utils/compareElementsUtils/isElementsEqual");
function getNumberOfChangedFilters(defaultState, newState) {
    let changes = 0;
    Object.keys(defaultState).forEach(key => {
        const oldValue = (defaultState)[key];
        const newValue = (newState)[key];
        if (!newValue) {
            // If the new value is not set, then the component is not visible, ignore it
            return;
        }
        if (Array.isArray(oldValue) && Array.isArray(newValue)) {
            if (!(0, isArraysEqualDeeply_1.isArraysEqualDeeply)(oldValue, newValue)) {
                changes++;
            }
            return;
        }
        if (typeof oldValue === "object" && typeof newValue === "object") {
            if (!(0, isElementsEqual_1.isElementsEqual)(oldValue, newValue)) {
                changes++;
            }
            return;
        }
        if (oldValue !== newValue) {
            changes++;
        }
    });
    Object.keys(newState).forEach(key => {
        if (defaultState[key] === undefined) {
            changes++;
        }
    });
    return changes;
}
exports.getNumberOfChangedFilters = getNumberOfChangedFilters;
