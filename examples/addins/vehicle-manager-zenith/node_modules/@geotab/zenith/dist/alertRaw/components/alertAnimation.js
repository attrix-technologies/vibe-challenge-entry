"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AlertAnimation = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const feedbackContext_1 = require("../../feedbackContainer/feedbackContext");
const AlertAnimation = ({ id, children, isOpen, animation }) => {
    const { startAlertAnimation, finishAlertAnimation } = (0, react_1.useContext)(feedbackContext_1.FeedbackContext);
    const ref = (0, react_1.useRef)(null);
    (0, react_1.useEffect)(() => {
        if (!ref.current || !isOpen || !animation) {
            return;
        }
        startAlertAnimation(id);
        if (animation === "top-bottom") {
            ref.current.animate([
                { bottom: "100%" },
                { bottom: "0%" }
            ], {
                duration: 300,
                iterations: 1,
                delay: 0
            }).onfinish = () => {
                finishAlertAnimation(id);
            };
            return;
        }
        if (animation === "bottom-top") {
            ref.current.animate([
                { top: "100%" },
                { top: "0%" }
            ], {
                duration: 300,
                iterations: 1,
                delay: 0
            }).onfinish = () => {
                finishAlertAnimation(id);
            };
            return;
        }
        if (animation === "left-right") {
            ref.current.animate([
                { left: "0%" },
                { left: "120%" }
            ], {
                duration: 300,
                iterations: 1,
                delay: 0,
                fill: "forwards"
            }).onfinish = () => {
                finishAlertAnimation(id);
            };
            return;
        }
        ref.current.animate([
            { left: "120%" },
            { left: "0%" }
        ], {
            duration: 300,
            iterations: 1,
            delay: 0
        }).onfinish = () => {
            finishAlertAnimation(id);
        };
    }, [isOpen, animation, id, startAlertAnimation, finishAlertAnimation]);
    return isOpen && (0, jsx_runtime_1.jsx)("div", { style: { position: "relative" }, ref: ref, children: children });
};
exports.AlertAnimation = AlertAnimation;
exports.default = exports.AlertAnimation;
