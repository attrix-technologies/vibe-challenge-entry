"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.PageHeaderActions = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const classNames_1 = require("../commonHelpers/classNames/classNames");
const headerHelpers_1 = require("../header/headerHelpers");
const react_2 = __importDefault(require("react"));
const collapsedItemsControl_1 = require("../header/components/collapsedItemsControl/collapsedItemsControl");
const pageHeaderButton_1 = require("./pageHeaderButton");
const pageHeaderMenu_1 = require("./pageHeaderMenu");
const pageHeaderHelpers_1 = require("./pageHeaderHelpers");
const PageHeaderActions = ({ className = "", children }) => {
    const childrenArray = (0, react_1.useMemo)(() => (0, pageHeaderHelpers_1.getItemsFromFragments)(
    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
    (0, headerHelpers_1.getArrayOfChildren)(children).filter((child) => child !== null && child !== undefined && react_2.default.isValidElement(child))), [children]);
    const nonFittingElements = (0, react_1.useMemo)(() => childrenArray.slice(2, childrenArray.length), [childrenArray]);
    const fittingElements = (0, react_1.useMemo)(() => childrenArray.slice(0, 2).map(el => {
        if ((0, headerHelpers_1.isNamedChildComponent)(el, pageHeaderButton_1.PageHeaderButtonDisplayName)) {
            return react_2.default.cloneElement(el, { key: el.props.id,
                children: undefined
            });
        }
        if ((0, headerHelpers_1.isNamedChildComponent)(el, pageHeaderMenu_1.PageHeaderMenuDisplayName)) {
            return react_2.default.cloneElement(el, { key: el.props.id, onlyIcon: true });
        }
        return el;
    }), [childrenArray]);
    const moreButton = (0, react_1.useMemo)(() => (0, jsx_runtime_1.jsx)(collapsedItemsControl_1.PageToolbarCollapsedItemsControl, { className: "zen-page-header-component__actions-more", children: nonFittingElements }, "page-header-more-actions-key"), [nonFittingElements]);
    return (childrenArray.length ? (0, jsx_runtime_1.jsxs)("div", { className: (0, classNames_1.classNames)(["zen-page-header-component__actions", className]), children: [nonFittingElements.length > 0 ? moreButton : null, fittingElements] }) : null);
};
exports.PageHeaderActions = PageHeaderActions;
