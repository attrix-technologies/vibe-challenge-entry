"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ActionablePill = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const classNames_1 = require("../../../commonHelpers/classNames/classNames");
const usePillSize_1 = require("../../../commonHelpers/hooks/usePillSize");
const getActionablePillStateClassName_1 = require("../../utils/getActionablePillStateClassName");
const useDrive_1 = require("../../../utils/theme/useDrive");
const useDriveClassName_1 = require("../../../utils/theme/useDriveClassName");
const ActionablePill = ({ onChange, disabled, readonly, className, children, icon, size, active }) => {
    const id = (0, react_1.useId)();
    const isDrive = (0, useDrive_1.useDrive)();
    const driveTextClass = (0, useDriveClassName_1.useDriveClassName)("zen-pill-text-content");
    const drivePillClass = (0, useDriveClassName_1.useDriveClassName)("zen-pill-actionable");
    const hasIcon = !!icon;
    const { contentClasses, ref, title, isFixedSize } = (0, usePillSize_1.usePillSize)({ size, iconPosition: "right" });
    const svgIcon = (0, react_1.useMemo)(() => hasIcon ? (0, react_1.createElement)(icon, {
        className: "zen-pill-non-actionable__icon",
        size: isDrive ? "bigger" : "medium"
    }) : null, [hasIcon, icon, isDrive]);
    const onChangeHandler = (0, react_1.useCallback)((e) => {
        if (readonly) {
            return;
        }
        onChange(e.target.checked);
    }, [onChange, readonly]);
    const onKeyDownHandler = (0, react_1.useCallback)((e) => {
        if (e.key === "Enter" && !disabled && !readonly) {
            onChange(!active);
            return;
        }
        if (e.key === " " && !disabled && !readonly) {
            e.preventDefault();
            onChange(!active);
        }
    }, [disabled, readonly, active, onChange]);
    const onKeyUpHandler = (0, react_1.useCallback)((e) => {
        var _a;
        if (e.key === "Tab" || e.key === "Enter" || e.key === " ") {
            (_a = ref.current) === null || _a === void 0 ? void 0 : _a.classList.add("zen-pill-actionable--keyboard-nav");
        }
    }, [ref]);
    const onBlurHandler = (0, react_1.useCallback)(() => {
        var _a;
        (_a = ref.current) === null || _a === void 0 ? void 0 : _a.classList.remove("zen-pill-actionable--keyboard-nav");
    }, [ref]);
    return (0, jsx_runtime_1.jsxs)("label", { style: { width: isFixedSize ? size : "" }, ref: ref, title: title, className: (0, classNames_1.classNames)([
            "zen-pill-actionable",
            drivePillClass !== null && drivePillClass !== void 0 ? drivePillClass : "",
            (0, getActionablePillStateClassName_1.getActionablePillStateClassName)(!!disabled, !!readonly, active),
            className !== null && className !== void 0 ? className : ""
        ]), htmlFor: id, children: [(0, jsx_runtime_1.jsx)("input", { checked: active, onBlur: onBlurHandler, onKeyUp: onKeyUpHandler, onKeyDown: onKeyDownHandler, onChange: onChangeHandler, id: id, className: "zen-pill-actionable__input", type: "checkbox", disabled: disabled, readOnly: readonly }), (0, jsx_runtime_1.jsxs)("div", { className: (0, classNames_1.classNames)(["zen-pill-actionable__content-wrapper", contentClasses]), children: [(0, jsx_runtime_1.jsx)("div", { className: (0, classNames_1.classNames)(["zen-pill-text-content", driveTextClass !== null && driveTextClass !== void 0 ? driveTextClass : ""]), children: children }), svgIcon] })] });
};
exports.ActionablePill = ActionablePill;
