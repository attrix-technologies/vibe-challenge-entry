"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TRANSLATIONS = exports.SearchableField = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const classNames_1 = require("../commonHelpers/classNames/classNames");
const iconCrossThin_1 = require("../icons/deprecated/iconCrossThin");
const iconArrowDown_1 = require("../icons/deprecated/iconArrowDown");
const useLanguage_1 = require("../utils/localization/useLanguage");
const SearchableField = ({ openSearch, inputId, title, placeholder, value, width, disabled, ariaControls, onOpenSearch, ariaAutocomplete, ariaOwns, inputRef, onFocus, onBlur, onChange, triggerRef, fullWidth }) => {
    const { translate } = (0, useLanguage_1.useLanguage)();
    const clearSearch = () => {
        var _a;
        (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();
        onChange("");
    };
    const handleChange = (e) => {
        onChange(e.target.value);
    };
    const searchInputClass = (0, classNames_1.classNames)([
        "zen-searchable-field__input",
        value ? "zen-searchable-field__input--short" : "",
        fullWidth ? "zen-searchable-field__input--full-width" : ""
    ]);
    const inputStyle = width ? { width: `${width}px` } : undefined;
    const openButtonClasses = `zen-searchable-field__field zen-searchable-field__button zen-searchable-field__button--small`;
    return (0, jsx_runtime_1.jsxs)("div", { "data-popup-id": ariaControls, id: ariaOwns, className: (0, classNames_1.classNames)(["zen-searchable-field", fullWidth ? "zen-searchable-field--full-width" : ""]), children: [(0, jsx_runtime_1.jsxs)("div", { className: (0, classNames_1.classNames)(["zen-searchable-field__field", "zen-searchable-field__search", fullWidth ? "zen-searchable-field__field--full-width" : ""]), children: [(0, jsx_runtime_1.jsx)("input", { style: inputStyle, id: inputId, onFocus: onFocus, onBlur: onBlur, type: "text", "aria-expanded": openSearch, "aria-controls": ariaControls, "aria-autocomplete": ariaAutocomplete, "aria-haspopup": "listbox", role: "combobox", className: searchInputClass, disabled: disabled, ref: inputRef, onChange: handleChange, value: value, placeholder: placeholder || translate("Search") }), value && (0, jsx_runtime_1.jsx)("button", { type: "button", tabIndex: -1, "aria-hidden": "true", className: "zen-searchable-field__close-button", title: translate("Clear search"), onClick: clearSearch, disabled: disabled, children: (0, jsx_runtime_1.jsx)(iconCrossThin_1.IconCrossThin, { size: "small" }) })] }), (0, jsx_runtime_1.jsx)("button", { ref: triggerRef, type: "button", tabIndex: -1, className: openButtonClasses, title: title || translate("Open search"), disabled: disabled, onClick: onOpenSearch, children: (0, jsx_runtime_1.jsx)(iconArrowDown_1.IconArrowDown, { className: openSearch ? "zen-searchable-field__arrow-icon--up" : "", size: "micro" }) })] });
};
exports.SearchableField = SearchableField;
exports.TRANSLATIONS = [
    "Search", "Clear search", "Open search"
];
