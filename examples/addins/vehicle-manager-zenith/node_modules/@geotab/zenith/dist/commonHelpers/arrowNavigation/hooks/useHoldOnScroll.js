"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useHoldOnScroll = void 0;
const react_1 = require("react");
const arrowNavigationHelper_1 = require("../arrowNavigationHelper");
const useClearTimers_1 = require("./useClearTimers");
const useScrollWhileHolding_1 = require("./useScrollWhileHolding");
const useResize_1 = require("../../hooks/useResize");
const useHoldOnScroll = () => {
    const scrollableElementRef = (0, react_1.useRef)(null);
    const timerRef = (0, react_1.useRef)(null);
    const intervalTimerId = (0, react_1.useRef)(null);
    const [action, setAction] = (0, react_1.useState)(null);
    const [isScrollable, setIsScrollable] = (0, react_1.useState)(true);
    const onMouseDown = (e) => {
        const actionName = (0, arrowNavigationHelper_1.extractButtonAction)(e);
        if (!actionName) {
            return;
        }
        setAction(actionName);
        timerRef.current = window.setTimeout(() => {
            action && setAction(actionName);
        }, 500);
    };
    const onMouseUp = () => setAction(null);
    (0, useScrollWhileHolding_1.useScrollWhileHolding)({
        action,
        container: scrollableElementRef.current,
        intervalTimer: intervalTimerId
    });
    (0, useClearTimers_1.useClearTimers)({
        action,
        timeoutTimer: timerRef,
        intervalTimer: intervalTimerId
    });
    (0, react_1.useLayoutEffect)(() => {
        if (scrollableElementRef.current) {
            setIsScrollable(scrollableElementRef.current.clientWidth >= scrollableElementRef.current.scrollWidth);
        }
    }, []);
    (0, useResize_1.useResize)(() => {
        if (scrollableElementRef.current) {
            setIsScrollable(scrollableElementRef.current.clientWidth >= scrollableElementRef.current.scrollWidth);
        }
    }, true);
    return { isScrollable, scrollableElementRef, onMouseDown, onMouseUp };
};
exports.useHoldOnScroll = useHoldOnScroll;
