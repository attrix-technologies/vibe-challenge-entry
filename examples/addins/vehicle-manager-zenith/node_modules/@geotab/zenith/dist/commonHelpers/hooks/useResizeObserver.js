"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useResizeObserver = void 0;
const react_1 = require("react");
const isRefObject = (target) => !!target && target.hasOwnProperty("current");
const getTarget = (target) => {
    const targetObj = isRefObject(target) ? target.current : target;
    return typeof targetObj === "function" ? targetObj() : targetObj;
};
const useResizeObserver = ({ target }) => {
    const [result, setResult] = (0, react_1.useState)(null);
    const timeoutRef = (0, react_1.useRef)(null);
    const observer = (0, react_1.useRef)(new ResizeObserver((entities) => {
        timeoutRef.current && cancelAnimationFrame(timeoutRef.current);
        timeoutRef.current = requestAnimationFrame(() => setResult(entities[0]));
    }));
    (0, react_1.useLayoutEffect)(() => {
        const targetObj = getTarget(target);
        const observerObj = observer.current;
        targetObj && observerObj.observe(targetObj);
        return () => {
            timeoutRef.current && cancelAnimationFrame(timeoutRef.current);
            observerObj.disconnect();
        };
    }, [target]);
    return { result };
};
exports.useResizeObserver = useResizeObserver;
