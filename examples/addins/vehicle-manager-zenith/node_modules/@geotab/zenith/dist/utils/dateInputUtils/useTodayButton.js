"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useTodayButton = void 0;
const react_1 = require("react");
const dateRangeUtils_1 = require("../../dateRange/dateRangeUtils");
const userFormatContext_1 = require("../userFormat/userFormatContext");
const normalizeDates_1 = require("../../filtersBar/components/filtersBarPeriodPicker/normalizeDates");
const useTodayButton = (dateRangeMode, disableFutureDates, disablePastDates, disableDatesBefore, disableDatesAfter) => {
    const { toLocalDateTime, toReverseOffsetDateTime } = (0, react_1.useContext)(userFormatContext_1.userFormatContext);
    const today = (0, dateRangeUtils_1.GET_TODAY_OPTION)(toLocalDateTime, (s) => s, toReverseOffsetDateTime).getRange();
    const normalizedDates = (0, normalizeDates_1.normalizeDates)(today.from.toISOString(), today.to.toISOString(), disableFutureDates, disablePastDates, disableDatesBefore, disableDatesAfter);
    const isTodayDisabled = (0, react_1.useMemo)(() => dateRangeMode ? today.from.toISOString() !== normalizedDates.from && today.to.toISOString() !== normalizedDates.to
        : !(new Date(normalizedDates.from).getTime() >= today.from.getTime() && new Date(normalizedDates.from).getTime() <= today.to.getTime()), [dateRangeMode, normalizedDates.from, normalizedDates.to, today.from, today.to]);
    return { isTodayDisabled, todayFrom: normalizedDates.from, todayTo: normalizedDates.to };
};
exports.useTodayButton = useTodayButton;
