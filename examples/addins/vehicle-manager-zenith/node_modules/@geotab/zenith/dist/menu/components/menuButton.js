"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MenuButton = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const classNames_1 = require("../../commonHelpers/classNames/classNames");
const iconChevronRight_1 = require("../../icons/iconChevronRight");
const useDriveClassName_1 = require("../../utils/theme/useDriveClassName");
const useDrive_1 = require("../../utils/theme/useDrive");
const getMenuButtonState_1 = require("../utils/getMenuButtonState");
exports.MenuButton = (0, react_1.forwardRef)(
// eslint-disable-next-line @typescript-eslint/naming-convention
function MenuButton({ id, onClick, hasChildren, disabled, icon, name, link, target, rel, className = "", active = null }, ref) {
    const { hasState, isActive } = (0, getMenuButtonState_1.getMenuButtonState)(active, disabled);
    const driveMenuButtonActionClasses = (0, useDriveClassName_1.useDriveClassName)("zen-menu-button__action");
    const isDrive = (0, useDrive_1.useDrive)();
    const linkEvents = (0, react_1.useMemo)(() => ({
        onKeyDown: (e) => {
            if (e.key === " ") {
                e.preventDefault();
                const linkEl = e.target;
                linkEl.classList.add("zen-menu-button__action--active");
            }
        },
        onKeyUp: (e) => {
            if (e.key === " ") {
                e.preventDefault();
                const linkEl = e.target;
                linkEl.classList.remove("zen-menu-button__action--active");
                linkEl.click();
            }
        }
    }), []);
    const onClickHandler = (0, react_1.useCallback)((e) => {
        onClick === null || onClick === void 0 ? void 0 : onClick(id, e);
    }, [id, onClick]);
    const buttonTemplate = (0, jsx_runtime_1.jsxs)("button", { type: "button", "data-id": id, ref: ref, disabled: !!disabled, title: name, className: (0, classNames_1.classNames)([
            "zen-menu-button__action",
            "zen-button", "zen-caption",
            hasChildren ? "zen-menu-button__action--has-children" : "",
            hasState && isActive ? "zen-menu-button__action--active" : "",
            driveMenuButtonActionClasses || ""
        ]), role: hasState ? "menuitemcheckbox" : "menuitem", onClick: onClickHandler, "aria-checked": hasState ? isActive : undefined, children: [!!icon && (0, react_1.createElement)(icon, {
                size: isDrive ? "huge" : "large",
                className: (0, classNames_1.classNames)(["zen-caption__pre-content", "zen-menu-button__icon"])
            }), (0, jsx_runtime_1.jsx)("span", { className: "zen-menu-button__action-text", children: name }), !!hasChildren && (0, jsx_runtime_1.jsx)(iconChevronRight_1.IconChevronRight, { size: isDrive ? "huge" : "large", className: (0, classNames_1.classNames)(["zen-caption__pre-content", "zen-menu-button__more-icon"]) })] });
    const linkTemplate = (0, jsx_runtime_1.jsxs)("a", Object.assign({ "data-id": id, role: "menuitem", className: (0, classNames_1.classNames)(["zen-menu-button__action", "zen-caption", disabled ? "zen-menu-button__action--disabled" : "", driveMenuButtonActionClasses || ""]), href: disabled ? undefined : link, "aria-disabled": disabled, onClick: onClickHandler, target: target, rel: rel }, linkEvents, { children: [!!icon && (0, react_1.createElement)(icon, {
                size: isDrive ? "huge" : "large",
                className: "zen-caption__pre-content"
            }), name] }));
    return (0, jsx_runtime_1.jsx)("li", { role: "presentation", className: (0, classNames_1.classNames)(["zen-menu-button", className]), children: link ? linkTemplate : buttonTemplate });
});
